%YAML 1.2
---
name: Underbar Assembly
file_extensions: [ub]
scope: source.underbar

contexts:
  main:
    - match: \b(add|bal|beq|bge|bgt|ble|blt|bne|cal|dec|del|den|div|dup|ent|flr|get|hcf|inc|inv|ldi|ldl|ldm|ldr|mod|mul|neg|new|num|put|ret|siz|stl|stm|str|sub|swp|top)\b
      scope: keyword.other.underbar

    - match: \b(fr|ir|jr|sr)\b
      scope: variable.language.underbar

    - match: \b(stderr|stdin|stdout)\b
      scope: variable.language.underbar

    - match: '(\b[.A-Z_a-z][.0-9A-Z_a-z]*\b)\s*(:)'
      captures:
        1: entity.name.label.underbar
        2: punctuation.separator.underbar

    - match: '(\b[.A-Z_a-z][.0-9A-Z_a-z]*\b)\s*(=)'
      captures:
        1: variable.other.constant.underbar
        2: punctuation.separator.underbar

    - match: \b[.A-Z_a-z][.0-9A-Z_a-z]*\b
      scope: variable.other.underbar

    - match: \b0|[1-9][0-9]*\b
      scope: constant.numeric.integer.decimal.underbar

    - match: '[-+/*]'
      scope: keyword.operator.arithmetic.underbar

    - match: ','
      scope: punctuation.underbar

    - match: (;|#)([^\n]*)(\n|$)
      captures:
        1: punctuation.separator.underbar
        2: comment.underbar

    - match: '"'
      scope: punctuation.definition.string.begin.underbar

      push:
        - meta_scope: string.quoted.double.underbar

        - match: \\.
          scope: constant.character.escape.underbar

        - match: '"'
          scope: punctuation.definition.string.end.underbar
          pop: true

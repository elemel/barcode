#!/usr/bin/env python3

import sys

from underbar.assembler import assemble
from underbar.process import Process


def main():
    assembly_code = open(sys.argv[1]).read()
    machine_code = assemble(assembly_code)

    process = Process(machine_code, sys.argv[2:])
    process.run()

    while True:
        line = process.readLine()

        if not line:
            break

        print(line, end='')


if __name__ == '__main__':
    main()
